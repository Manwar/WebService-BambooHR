<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:neil@bowers.com" />
</head>

<body style="background-color: white">



<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a>
    <ul>
      <li><a href="#Generating-an-API-key">Generating an API key</a></li>
    </ul>
  </li>
  <li><a href="#METHODS">METHODS</a>
    <ul>
      <li><a href="#employee_list">employee_list</a></li>
      <li><a href="#employee">employee</a></li>
      <li><a href="#add_employee">add_employee</a></li>
      <li><a href="#update_employee">update_employee</a></li>
      <li><a href="#employee_photo">employee_photo</a></li>
      <li><a href="#changed_employees">changed_employees</a></li>
    </ul>
  </li>
  <li><a href="#Employee-objects">Employee objects</a></li>
  <li><a href="#Exceptions">Exceptions</a></li>
  <li><a href="#LIMITATIONS">LIMITATIONS</a></li>
  <li><a href="#SEE-ALSO">SEE ALSO</a></li>
  <li><a href="#REPOSITORY">REPOSITORY</a></li>
  <li><a href="#AUTHOR">AUTHOR</a></li>
  <li><a href="#COPYRIGHT-AND-LICENSE">COPYRIGHT AND LICENSE</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>WebService::BambooHR - interface to the API for BambooHR.com</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<pre><code> use WebService::BambooHR;

 my $bamboo = WebService::BambooHR-&gt;new(
                  company =&gt; &#39;foobar&#39;,
                  api_key =&gt; &#39;...&#39;
              );
 
 $id        = $bamboo-&gt;add_employee({
                  firstName =&gt; &#39;Bilbo&#39;,
                  lastName  =&gt; &#39;Baggins&#39;,
              });

 $employee  = $bamboo-&gt;employee($id);
 
 $bamboo-&gt;update_employee($employee-&gt;id, {
     dateOfBirth =&gt; &#39;1953-11-22&#39;,
     gender      =&gt; &#39;Male&#39;,
  });</code></pre>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p><b>NOTE:</b> this is very much an alpha release. The interface is likely to change from release to release. Suggestions for improving the interface are welcome.</p>

<p><b>WebService::BambooHR</b> provides an interface to a subset of the functionality in the API for BambooHR (a commercial online HR system: lets a company manage employee information, handle time off, etc).</p>

<p>To talk to BambooHR you must first create an instance of this module:</p>

<pre><code> my $bamboo = WebService::BambooHR-&gt;new(
                  company =&gt; &#39;mycompany&#39;,
                  api_key =&gt; $api_key,
              );
 </code></pre>

<p>The <b>company</b> field is the domain name that you use to access BambooHR. For example, the above company would be accessed via <code>mycompany.bamboohr.com</code>. You also need an API key. See the section below on how to create one.</p>

<p>Having created an instance, you can use the public methods that are described below. For example, to display a list of all employees:</p>

<pre><code> @employees = $bamboo-&gt;employee_list();
 foreach my $employee (@employees) {
     printf &quot;Hi %s %s\n&quot;, $employee-&gt;firstName,
                          $employee-&gt;lastName;
 }</code></pre>

<p>Note that the <code>print</code> statement could more succinctly have been written as:</p>

<pre><code> print &quot;Hi $employee\n&quot;;</code></pre>

<p>The employee class overloads string-context rendering to display the employee&#39;s name.</p>

<h2 id="Generating-an-API-key">Generating an API key</h2>

<p>To get an API key you need to be an <i>admin user</i> of BambooHR. Ask the owner of your BambooHR account to make you an admin user. Once you are, login to Bamboo and generate an API key: Look for the entry &quot;API Keys&quot; in the drop-menu under your name.</p>

<h1 id="METHODS">METHODS</h1>

<h2 id="employee_list">employee_list</h2>

<p>Returns a list of all employees in BambooHR for your company:</p>

<pre><code> @employees = $bamboo-&gt;employee_list();</code></pre>

<p>Each employee is an instance of <a>WebService::BambooHR::Employee</a>. See the documentation for that module to see what information is available for each employee. You can find out more information from the <a href="http://www.bamboohr.com/api/documentation/employees.php">BambooHR documentation</a>.</p>

<p>This will return both active and inactive employees: check the <code>status</code> field if you only want to handle active employees:</p>

<pre><code> foreach my $employee ($bamboo-&gt;employee_list) {
    next if $employee-&gt;status eq &#39;Inactive&#39;;
    ...
 }</code></pre>

<p>If you&#39;re only interested in specific employee fields, you can just ask for those:</p>

<pre><code> @fields    = qw(firstName lastName workEmail);
 @employees = $bamboo-&gt;employee_list(@fields);</code></pre>

<p>All other fields will then return <code>undef</code>, regardless of whether they&#39;re set in BambooHR.</p>

<h2 id="employee">employee</h2>

<p>Used to request a single employee using the employee&#39;s internal id, optionally specifying what fields should be populated from BambooHR:</p>

<pre><code> $employee = $bamboo-&gt;employee($id);</code></pre>

<p>This returns an instance of <a>WebService::BambooHR::Employee</a>. If no fields are specified in the request, then all fields will be available via attributes on the employee object.</p>

<p>As for <code>employee_list()</code> above, you can specify just the fields you&#39;re interested in:</p>

<pre><code> @fields   = qw(firstName lastName workEmail);
 $employee = $bamboo-&gt;employee($id, @fields);</code></pre>

<h2 id="add_employee">add_employee</h2>

<p>Add a new employee to your company, specifying initial values for as many employee fields as you want to specify. You must provide <b>firstName</b> and <b>lastName</b>:</p>

<pre><code> $id = $bamboo-&gt;add_employee({
           firstName =&gt; &#39;Bilbo&#39;,
           lastName  =&gt; &#39;Baggins&#39;,
           jobTitle  =&gt; &#39;Thief&#39;,
       });</code></pre>

<p>This returns the internal id of the employee.</p>

<h2 id="update_employee">update_employee</h2>

<p>This is used to update one or more fields for an employee:</p>

<pre><code> $bamboo-&gt;update_employee($employee_id, {
     workEmail =&gt; &#39;bilbo@hobbiton.org&#39;,
     bestEmail =&gt; &#39;bilbo@bag.end&#39;,
 });</code></pre>

<h2 id="employee_photo">employee_photo</h2>

<p>Request an employee&#39;s photo, if one has been provided:</p>

<pre><code> $photo = $bamboo-&gt;employee_photo($employee_id);</code></pre>

<p>This returns a JPEG image of size 150x150, or <code>undef</code> if the employee doesn&#39;t have a photo.</p>

<h2 id="changed_employees">changed_employees</h2>

<p>Returns a list of objects that identifies employees whose BambooHR accounts have been changed since a particular date and time. You must pass a date/time string in ISO 8601 format:</p>

<pre><code> @changes = $bamboo-&gt;changed_employees(&#39;2014-01-20T00:00:01Z&#39;);</code></pre>

<p>The list contains instances of class <a>WebService::BambooHR::EmployeeChange</a>, which has three methods:</p>

<ul>

<li><p>id</p>

<p>The internal id for the employee, which you would pass to the <code>employee()</code> method, for example.</p>

</li>
<li><p>action</p>

<p>A string that identifies the most recent change to the employee. It will be one of &#39;Inserted&#39;, &#39;Updated&#39;, or &#39;Deleted&#39;.</p>

</li>
<li><p>lastChanged</p>

<p>A date and time string in ISO 8601 format that gives the time of the last change.</p>

</li>
</ul>

<p>In place of the &#39;action&#39; method, you could use one of the three convenience methods (<code>inserted</code>, <code>updated</code>, and <code>deleted</code>), which are named after the legal values for action:</p>

<pre><code> print &quot;employee was deleted\n&quot; if $change-&gt;deleted;</code></pre>

<h1 id="Employee-objects">Employee objects</h1>

<p>A number of methods return one or more employee objects. These are instances of <a>WebService::BambooHR::Employee</a>. You can find out what fields are supported from the <a href="http://www.bamboohr.com/api/documentation/employees.php">BambooHR documentation</a>. The methods are all named after the fields, exactly as they&#39;re given in the doc. So for example:</p>

<pre><code> print &quot;first name = &quot;, $employee-&gt;firstName, &quot;\n&quot;;
 print &quot;work email = &quot;, $employee-&gt;workEmail, &quot;\n&quot;;</code></pre>

<p>If you use an object in a string context, you&#39;ll get the person&#39;s full name. So the following lines produce identical output:</p>

<pre><code> print &quot;name = $employee\n&quot;;
 print &quot;name = &quot;, $employee-&gt;firstName, &quot; &quot;, $employee-&gt;lastName, &quot;\n&quot;;</code></pre>

<h1 id="Exceptions">Exceptions</h1>

<p>This module throws exceptions on failure. If you don&#39;t catch these, it will effectively die with an error message that identifies the method being called, the line in your code, and the error that occurred.</p>

<p>You can catch the exceptions using the <code>eval</code> built-in, but you might also choose to use <a>Try::Tiny</a>. For example, you must have permission to get a list of employees:</p>

<pre><code> try {
     $employee = $bamboo-&gt;employee($id);
 } catch {
     if ($_-&gt;code == 403) {
         print &quot;You don&#39;t have permission to get that employee\n&quot;;
     } else {
         ...
     }
 };</code></pre>

<p>The exceptions are instances of <a>WebService::BambooHR::Exception</a>. Look at the documentation for that module to see what information is available with each exception.</p>

<h1 id="LIMITATIONS">LIMITATIONS</h1>

<p>The full BambooHR API is not yet supported. I&#39;ll gradually fill it in as I need it, or the whim takes me. Pull requests are welcome: see the github repo below.</p>

<h1 id="SEE-ALSO">SEE ALSO</h1>

<p><a href="http://www.bamboohr.com/api/documentation/">BambooHR API documentation</a></p>

<h1 id="REPOSITORY">REPOSITORY</h1>

<p><a href="https://github.com/neilbowers/WebService-BambooHR">https://github.com/neilbowers/WebService-BambooHR</a></p>

<h1 id="AUTHOR">AUTHOR</h1>

<p>Neil Bowers &lt;neilb@cpan.org&gt;</p>

<h1 id="COPYRIGHT-AND-LICENSE">COPYRIGHT AND LICENSE</h1>

<p>This software is copyright (c) 2014 by Neil Bowers &lt;neilb@cpan.org&gt;.</p>

<p>This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5 programming language system itself.</p>


</body>

</html>


